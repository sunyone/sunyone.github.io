
<!DOCTYPE HTML>
<html lang="zh-hans">
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Linux&#x6027;&#x80FD;&#x5E38;&#x7528;&#x547D;&#x4EE4; &#xB7; &#x5B66;&#x4E60;&#x4E2D;&#x5FC3;</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="S1">
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-anchor-navigation-ex-toc/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="linux_other_cmd.html">
    
    
    <link rel="prev" href="linux_hardware_cmd.html">
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="&#x8F93;&#x5165;&#x5E76;&#x641C;&#x7D22;">
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://gitee.com/3017677" target="_blank" class="custom-link">&#x7801;&#x4E91;</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    &#x4ECB;&#x7ECD;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="chang_yong_url.html">
            
                <a href="chang_yong_url.html">
            
                    
                    &#x5E38;&#x7528;URL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3">
            
                <span>
            
                    
                    ANSIBLE
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="ansible/ab_readme.html">
            
                <a href="ansible/ab_readme.html">
            
                    
                    ansible
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="ansible/ab_proxy.html">
            
                <a href="ansible/ab_proxy.html">
            
                    
                    ssh&#x8DF3;&#x8F6C;
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4">
            
                <span>
            
                    
                    work
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="work/cai_ji.html">
            
                <a href="work/cai_ji.html">
            
                    
                    &#x91C7;&#x96C6;
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="git.html">
            
                <a href="git.html">
            
                    
                    git
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6">
            
                <span>
            
                    
                    gitbook&#x64CD;&#x4F5C;&#x6307;&#x5357;
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="gitbook_readme.html">
            
                <a href="gitbook_readme.html">
            
                    
                    &#x5E38;&#x7528;&#x64CD;&#x4F5C;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="gitbook_plugins.html">
            
                <a href="gitbook_plugins.html">
            
                    
                    &#x63D2;&#x4EF6;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="gitbook-convert.html">
            
                <a href="gitbook-convert.html">
            
                    
                    &#x6587;&#x6863;&#x8F6C;&#x6362;
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7">
            
                <span>
            
                    
                    Linux
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="linux/linux_readme.html">
            
                <a href="linux/linux_readme.html">
            
                    
                    linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="linux_systemctl.html">
            
                <a href="linux_systemctl.html">
            
                    
                    systemctl
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="linux/ssh.html">
            
                <a href="linux/ssh.html">
            
                    
                    SSH
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="linux_hardware_cmd.html">
            
                <a href="linux_hardware_cmd.html">
            
                    
                    Linux&#x786C;&#x4EF6;&#x5E38;&#x7528;&#x547D;&#x4EE4;
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.7.5" data-path="linux_performance_cmd.html">
            
                <a href="linux_performance_cmd.html">
            
                    
                    Linux&#x6027;&#x80FD;&#x5E38;&#x7528;&#x547D;&#x4EE4;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="linux_other_cmd.html">
            
                <a href="linux_other_cmd.html">
            
                    
                    Linux&#x5176;&#x5B83;&#x5E38;&#x7528;&#x547D;&#x4EE4;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="linux_res.html">
            
                <a href="linux_res.html">
            
                    
                    Linux&#x8D44;&#x6E90;&#x6C47;&#x603B;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="linux_uuid.html">
            
                <a href="linux_uuid.html">
            
                    
                    Linux&#x5757;&#x8BBE;&#x5907;UUID&#x63A2;&#x7A76;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9" data-path="linux_tpcc.html">
            
                <a href="linux_tpcc.html">
            
                    
                    &#x670D;&#x52A1;&#x5668;&#x5904;&#x7406;&#x80FD;&#x529B;&#xFF0C;&#x4F60;&#x4F30;&#x7B97;&#x6B63;&#x786E;&#x8FC7;&#x5417;&#xFF1F;
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8">
            
                <span>
            
                    
                    shell
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="shell_script/get_ip.html">
            
                <a href="shell_script/get_ip.html">
            
                    
                    &#x83B7;&#x53D6;&#x4E3B;&#x673A;&#x540D;&#x3001;IP&#x3001;&#x767B;&#x5F55;&#x7528;&#x6237;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="shell_script/base.html">
            
                <a href="shell_script/base.html">
            
                    
                    &#x57FA;&#x672C;&#x8BED;&#x6CD5;
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9">
            
                <span>
            
                    
                    Windows
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="windows/win_readme.html">
            
                <a href="windows/win_readme.html">
            
                    
                    Windows&#x5E38;&#x7528;
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10">
            
                <span>
            
                    
                    python
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="python/python_readme.html">
            
                <a href="python/python_readme.html">
            
                    
                    python
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="python/python_template.html">
            
                <a href="python/python_template.html">
            
                    
                    python&#x6A21;&#x677F;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="python/python_argparse.html">
            
                <a href="python/python_argparse.html">
            
                    
                    python&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;&#x89E3;&#x6790;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="python/python_zhengze.html">
            
                <a href="python/python_zhengze.html">
            
                    
                    python&#x6B63;&#x5219;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="python/han_shu_shi.html">
            
                <a href="python/han_shu_shi.html">
            
                    
                    &#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="python/python_logging.html">
            
                <a href="python/python_logging.html">
            
                    
                    &#x5185;&#x90E8;&#x6A21;&#x5757;logging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="python/import_bs4.html">
            
                <a href="python/import_bs4.html">
            
                    
                    BeautifulSoup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="python/leaning_log.html">
            
                <a href="python/leaning_log.html">
            
                    
                    &#x9879;&#x76EE;1leaning_log
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.8.1" data-path="python/leaning_log_user.html">
            
                <a href="python/leaning_log_user.html">
            
                    
                    &#x521B;&#x5EFA;&#x7528;&#x6237;&#x8D26;&#x53F7;
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11">
            
                <span>
            
                    
                    Zabbix
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="zabbix/zbx_readme.html">
            
                <a href="zabbix/zbx_readme.html">
            
                    
                    zabbix
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="zabbix/zbx_agt_conf.html">
            
                <a href="zabbix/zbx_agt_conf.html">
            
                    
                    agent&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BF4;&#x660E;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="zabbix/zbx_autoreg.html">
            
                <a href="zabbix/zbx_autoreg.html">
            
                    
                    &#x81EA;&#x52A8;&#x6CE8;&#x518C;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="zabbix/zabbix_kpi.html">
            
                <a href="zabbix/zabbix_kpi.html">
            
                    
                    &#x76D1;&#x63A7;&#x6307;&#x6807;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" data-path="zabbix/get_data_from_mysql.html">
            
                <a href="zabbix/get_data_from_mysql.html">
            
                    
                    &#x4ECE;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x83B7;&#x53D6;&#x76D1;&#x63A7;&#x6570;&#x636E;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.6" data-path="zabbix/zabbix_disk_UserParameter.html">
            
                <a href="zabbix/zabbix_disk_UserParameter.html">
            
                    
                    &#x76D1;&#x63A7;&#x78C1;&#x76D8;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.7" data-path="zabbix/zabbix_zk_UserParameter.html">
            
                <a href="zabbix/zabbix_zk_UserParameter.html">
            
                    
                    &#x76D1;&#x63A7;zookeeper
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.8" data-path="zabbix/zabbix_redis_UserParameter.html">
            
                <a href="zabbix/zabbix_redis_UserParameter.html">
            
                    
                    &#x76D1;&#x63A7;redis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.9" data-path="zabbix/zabbix_kafka_UserParameter.html">
            
                <a href="zabbix/zabbix_kafka_UserParameter.html">
            
                    
                    &#x76D1;&#x63A7;kafka
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.10" data-path="zabbix/zabbix_storm_UserParameter.html">
            
                <a href="zabbix/zabbix_storm_UserParameter.html">
            
                    
                    &#x76D1;&#x63A7;storm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.11" data-path="zabbix/zabbix_sparkstreaming_UserParameter.html">
            
                <a href="zabbix/zabbix_sparkstreaming_UserParameter.html">
            
                    
                    &#x76D1;&#x63A7;spark streaming
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12">
            
                <span>
            
                    
                    &#x6570;&#x636E;&#x5E93;
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="database/oracle.html">
            
                <a href="database/oracle.html">
            
                    
                    ORACLE
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13">
            
                <span>
            
                    
                    Hadoop
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="hadoop/hdfs.html">
            
                <a href="hadoop/hdfs.html">
            
                    
                    HDFS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="hadoop/yarn.html">
            
                <a href="hadoop/yarn.html">
            
                    
                    Yarn
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="kafka/kafka_readme.html">
            
                <a href="kafka/kafka_readme.html">
            
                    
                    Kafka
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15">
            
                <span>
            
                    
                    &#x5176;&#x5B83;&#x5E38;&#x7528;
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="grafana_readme.html">
            
                <a href="grafana_readme.html">
            
                    
                    grafana
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="sublime_readme.html">
            
                <a href="sublime_readme.html">
            
                    
                    sublime
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="markdown_readme.html">
            
                <a href="markdown_readme.html">
            
                    
                    markdown
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16">
            
                <span>
            
                    
                    &#x62DB;&#x8058;
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="zhaopin/ruan_jian_ce_shi_mian_shi.html">
            
                <a href="zhaopin/ruan_jian_ce_shi_mian_shi.html">
            
                    
                    &#x8F6F;&#x4EF6;&#x6D4B;&#x8BD5;&#x9762;&#x8BD5;&#x9898;
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17">
            
                <span>
            
                    
                    M
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="manager/ri_chang.html">
            
                <a href="manager/ri_chang.html">
            
                    
                    &#x65E5;&#x5E38;
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="manager/ren_zhi_jue_se_hjfz.html">
            
                <a href="manager/ren_zhi_jue_se_hjfz.html">
            
                    
                    &#x9EC4;&#x91D1;&#x6CD5;&#x5219;
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            &#x672C;&#x4E66;&#x4F7F;&#x7528; GitBook &#x53D1;&#x5E03;
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".">Linux&#x6027;&#x80FD;&#x5E38;&#x7528;&#x547D;&#x4EE4;</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-anchor"></i><ul><li><span class="title-icon "></span><a href="#1&#x3001;cpu"><b>1. </b>1&#x3001;CPU</a></li><ul><li><span class="title-icon "></span><a href="#cpu&#x6838;&#x6570;"><b>1.1. </b>CPU&#x6838;&#x6570;</a></li></ul><li><span class="title-icon "></span><a href="#2&#x3001;&#x5185;&#x5B58;"><b>2. </b>2&#x3001;&#x5185;&#x5B58;</a></li><ul><li><span class="title-icon "></span><a href="#&#x5185;&#x5B58;&#x5927;&#x5C0F;"><b>2.1. </b>&#x5185;&#x5B58;&#x5927;&#x5C0F;</a></li><li><span class="title-icon "></span><a href="#&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;"><b>2.2. </b>&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;</a></li><li><span class="title-icon "></span><a href="#&#x5FAA;&#x73AF;&#x663E;&#x793A;&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;"><b>2.3. </b>&#x5FAA;&#x73AF;&#x663E;&#x793A;&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;</a></li><li><span class="title-icon "></span><a href="#&#x6240;&#x6709;&#x8FDB;&#x7A0B;&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x65E2;rss"><b>2.4. </b>&#x6240;&#x6709;&#x8FDB;&#x7A0B;&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x65E2;RSS</a></li><li><span class="title-icon "></span><a href="#&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;&#x4E0D;&#x9AD8;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x7528;&#x4E8E;buffer&#x548C;cache"><b>2.5. </b>&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;&#x4E0D;&#x9AD8;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x7528;&#x4E8E;buffer&#x548C;cache</a></li><li><span class="title-icon "></span><a href="#used&#x5185;&#x5B58;&#x5230;&#x5E95;&#x54EA;&#x91CC;&#x53BB;&#x4E86;"><b>2.6. </b>Used&#x5185;&#x5B58;&#x5230;&#x5E95;&#x54EA;&#x91CC;&#x53BB;&#x4E86;</a></li><li><span class="title-icon "></span><a href="#&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x5206;&#x5E03;"><b>2.7. </b>&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x5206;&#x5E03;</a></li><ul><li><span class="title-icon "></span><a href="#slab"><b>2.7.1. </b>Slab</a></li><li><span class="title-icon "></span><a href="#pagetables"><b>2.7.2. </b>PageTables</a></li><li><span class="title-icon "></span><a href="#&#x5185;&#x5B58;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5360;&#x7528;&#x5185;&#x5B58;"><b>2.7.3. </b>&#x5185;&#x5B58;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5360;&#x7528;&#x5185;&#x5B58;</a></li></ul></ul><li><span class="title-icon "></span><a href="#swap"><b>3. </b>SWAP</a></li><ul><li><span class="title-icon "></span><a href="#&#x6700;&#x5927;&#x9650;&#x5EA6;&#x4F7F;&#x7528;&#x5185;&#x5B58;"><b>3.1. </b>&#x6700;&#x5927;&#x9650;&#x5EA6;&#x4F7F;&#x7528;&#x5185;&#x5B58;</a></li><li><span class="title-icon "></span><a href="#&#x6E05;&#x7406;swap"><b>3.2. </b>&#x6E05;&#x7406;SWAP</a></li><li><span class="title-icon "></span><a href="#&#x67E5;&#x770B;&#x54EA;&#x4E9B;&#x8FDB;&#x7A0B;&#x5360;&#x7528;swap"><b>3.3. </b>&#x67E5;&#x770B;&#x54EA;&#x4E9B;&#x8FDB;&#x7A0B;&#x5360;&#x7528;SWAP</a></li></ul><li><span class="title-icon "></span><a href="#3&#x3001;&#x78C1;&#x76D8;"><b>4. </b>3&#x3001;&#x78C1;&#x76D8;</a></li><ul><li><span class="title-icon "></span><a href="#&#x78C1;&#x76D8;&#x5229;&#x7528;&#x7387;"><b>4.1. </b>&#x78C1;&#x76D8;&#x5229;&#x7528;&#x7387;</a></li><li><span class="title-icon "></span><a href="#iops"><b>4.2. </b>IOPS</a></li><li><span class="title-icon "></span><a href="#&#x78C1;&#x76D8;&#x5199;&#x901F;&#x7387;"><b>4.3. </b>&#x78C1;&#x76D8;&#x5199;&#x901F;&#x7387;</a></li></ul><li><span class="title-icon "></span><a href="#4&#x3001;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;"><b>5. </b>4&#x3001;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</a></li><ul><li><span class="title-icon "></span><a href="#&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5206;&#x533A;"><b>5.1. </b>&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5206;&#x533A;</a></li><li><span class="title-icon "></span><a href="#cron&#x6839;&#x636E;vip&#x6302;&#x8F7D;&#x5378;&#x8F7D;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;"><b>5.2. </b>cron&#x6839;&#x636E;VIP&#x6302;&#x8F7D;/&#x5378;&#x8F7D;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</a></li><li><span class="title-icon "></span><a href="#inode&#x544A;&#x8B66;"><b>5.3. </b>inode&#x544A;&#x8B66;</a></li><li><span class="title-icon "></span><a href="#&#x6587;&#x4EF6;&#x5220;&#x9664;&#x7A7A;&#x95F4;&#x6CA1;&#x6709;&#x91CA;&#x653E;"><b>5.4. </b>&#x6587;&#x4EF6;&#x5220;&#x9664;&#x7A7A;&#x95F4;&#x6CA1;&#x6709;&#x91CA;&#x653E;</a></li></ul><li><span class="title-icon "></span><a href="#5&#x3001;&#x7F51;&#x7EDC;"><b>6. </b>5&#x3001;&#x7F51;&#x7EDC;</a></li><ul><li><span class="title-icon "></span><a href="#&#x7AEF;&#x53E3;&#x8FDE;&#x63A5;"><b>6.1. </b>&#x7AEF;&#x53E3;&#x8FDE;&#x63A5;</a></li><li><span class="title-icon "></span><a href="#&#x8FDE;&#x63A5;&#x6570;"><b>6.2. </b>&#x8FDE;&#x63A5;&#x6570;</a></li><li><span class="title-icon "></span><a href="#&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x8FDE;&#x63A5;&#x6392;&#x540D;"><b>6.3. </b>&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x8FDE;&#x63A5;&#x6392;&#x540D;</a></li><li><span class="title-icon "></span><a href="#&#x7F51;&#x7EDC;&#x79EF;&#x538B;"><b>6.4. </b>&#x7F51;&#x7EDC;&#x79EF;&#x538B;</a></li><li><span class="title-icon "></span><a href="#sar&#x547D;&#x4EE4;&#x5206;&#x6790;&#x7F51;&#x5361;&#x6D41;&#x91CF;"><b>6.5. </b>sar&#x547D;&#x4EE4;&#x5206;&#x6790;&#x7F51;&#x5361;&#x6D41;&#x91CF;</a></li></ul><li><span class="title-icon "></span><a href="#6&#x3001;&#x8FDB;&#x7A0B;"><b>7. </b>6&#x3001;&#x8FDB;&#x7A0B;</a></li><ul><li><span class="title-icon "></span><a href="#&#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x6570;"><b>7.1. </b>&#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x6570;</a></li><li><span class="title-icon "></span><a href="#&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x6253;&#x5F00;&#x6570;"><b>7.2. </b>&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x6253;&#x5F00;&#x6570;</a></li><li><span class="title-icon "></span><a href="#max-user-processes"><b>7.3. </b>max user processes</a></li><li><span class="title-icon "></span><a href="#&#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x505C;&#x6B62;&#x65F6;&#x95F4;"><b>7.4. </b>&#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x505C;&#x6B62;&#x65F6;&#x95F4;</a></li><li><span class="title-icon "></span><a href="#&#x4F7F;&#x7528;cpu&#x6700;&#x9AD8;&#x7684;&#x8FDB;&#x7A0B;top10"><b>7.5. </b>&#x4F7F;&#x7528;CPU&#x6700;&#x9AD8;&#x7684;&#x8FDB;&#x7A0B;TOP10</a></li><li><span class="title-icon "></span><a href="#&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x6700;&#x9AD8;&#x7684;&#x8FDB;&#x7A0B;top10"><b>7.6. </b>&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x6700;&#x9AD8;&#x7684;&#x8FDB;&#x7A0B;TOP10</a></li><li><span class="title-icon "></span><a href="#&#x6240;&#x6709;&#x8FDB;&#x7A0B;&#x5185;&#x5B58;"><b>7.7. </b>&#x6240;&#x6709;&#x8FDB;&#x7A0B;&#x5185;&#x5B58;</a></li><li><span class="title-icon "></span><a href="#&#x6279;&#x91CF;&#x6740;&#x67D0;ip&#x8FDE;&#x63A5;&#x8FDB;&#x7A0B;"><b>7.8. </b>&#x6279;&#x91CF;&#x6740;&#x67D0;ip&#x8FDE;&#x63A5;&#x8FDB;&#x7A0B;</a></li></ul></ul></div><a href="#1&#x3001;cpu" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="1&#x3001;cpu"><a name="1&#x3001;cpu" class="anchor-navigation-ex-anchor" href="#1&#x3001;cpu"><i class="fa fa-link" aria-hidden="true"></i></a>1. 1&#x3001;CPU</h1>
<h2 id="cpu&#x6838;&#x6570;"><a name="cpu&#x6838;&#x6570;" class="anchor-navigation-ex-anchor" href="#cpu&#x6838;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. CPU&#x6838;&#x6570;</h2>
<p>&#x5982;&#x4F55;&#x8BC6;&#x522B;&#x7269;&#x7406;cpu&#x4E2A;&#x6570;&#xFF0C;&#x51E0;&#x4E2A;&#x6838;&#xFF0C;&#x662F;&#x8D85;&#x7EBF;&#x7A0B;&#x8FD8;&#x662F;&#x591A;&#x6838;&#x5FC3;
&#x5224;&#x65AD;&#x4F9D;&#x636E;&#xFF1A;
1.&#x5177;&#x6709;&#x76F8;&#x540C;core id&#x7684;cpu&#x662F;&#x540C;&#x4E00;&#x4E2A;core&#x7684;&#x8D85;&#x7EBF;&#x7A0B;&#x3002;
2.&#x5177;&#x6709;&#x76F8;&#x540C;physical id&#x7684;cpu&#x662F;&#x540C;&#x4E00;&#x9897;cpu&#x5C01;&#x88C5;&#x7684;&#x7EBF;&#x7A0B;&#x6216;&#x8005;cores&#x3002;
&#x82F1;&#x6587;&#x7248;&#xFF1A;
1.Physical id and core id are not necessarily consecutive but they are unique. Any cpu with the same core id are hyperthreads in the same core.
2.Any cpu with the same physical id are threads or cores in the same physical socket.</p>
<pre class="language-"><code class="lang-sh"><span class="token comment"># &#x903B;&#x8F91;CPU&#x4E2A;&#x6570;</span>
<span class="token function">grep</span> -c processor /proc/cpuinfo
<span class="token comment"># &#x7269;&#x7406;CPU&#x4E2A;&#x6570;</span>
<span class="token function">grep</span> <span class="token string">&apos;physical id&apos;</span> /proc/cpuinfo <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> <span class="token operator">|</span> <span class="token function">wc</span> -l
<span class="token comment"># &#x5355;&#x4E2A;CPU&#x6838;&#x6570;</span>
<span class="token function">grep</span> <span class="token string">&quot;cpu cores&quot;</span> /proc/cpuinfo<span class="token operator">|</span> <span class="token function">uniq</span><span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos;{print <span class="token variable">$NF</span>}&apos;</span>
<span class="token comment"># &#x662F;&#x5426;&#x662F;&#x8D85;&#x7EBF;&#x7A0B;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5355;&#x4E2A;CPU&#x6838;&#x6570;2&#x500D;&#xFF0C;&#x90A3;&#x4E48;&#x662F;&#x8D85;&#x7EBF;&#x7A0B;</span>
<span class="token function">grep</span> siblings /proc/cpuinfo <span class="token operator">|</span><span class="token function">uniq</span>
</code></pre>
<p>&#x7269;&#x7406;&#x673A;CPU&#x6570;&#x91CF;</p>
<pre class="language-"><code class="lang-sh">W<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">grep</span> <span class="token string">&quot;physical id&quot;</span> /proc/cpuinfo<span class="token operator">|</span> <span class="token function">sort</span><span class="token operator">|</span> <span class="token function">uniq</span><span class="token operator">|</span> <span class="token function">wc</span> -l<span class="token variable">`</span></span>

C<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">grep</span> <span class="token string">&quot;cpu cores&quot;</span> /proc/cpuinfo <span class="token operator">|</span> <span class="token function">uniq</span><span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos;{print <span class="token variable">$NF</span>}&apos;</span><span class="token variable">`</span></span>

T<span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> siblings /proc/cpuinfo <span class="token operator">|</span><span class="token function">uniq</span><span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos;{print <span class="token variable">$NF</span>}&apos;</span><span class="token variable">)</span></span>

Z<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $W \* $T<span class="token variable">`</span></span>

<span class="token keyword">echo</span> -n <span class="token string">&quot;&#x7269;&#x7406;CPU&#x4E2A;&#x6570;: <span class="token variable">$W</span>, &quot;</span><span class="token punctuation">;</span> <span class="token keyword">echo</span> -n <span class="token string">&quot;&#x5355;CPU&#x6838;&#x6570;: <span class="token variable">$C</span>, &quot;</span><span class="token punctuation">;</span> <span class="token keyword">echo</span> -n <span class="token string">&quot;&#x8D85;&#x7EBF;&#x7A0B;: <span class="token variable">$T</span>, &quot;</span><span class="token punctuation">;</span> <span class="token keyword">echo</span> <span class="token string">&quot;CPU&#x6570;&#x91CF;: <span class="token variable">$Z</span>&quot;</span>

<span class="token function">grep</span> -c processor /proc/cpuinfo
</code></pre>
<h1 id="2&#x3001;&#x5185;&#x5B58;"><a name="2&#x3001;&#x5185;&#x5B58;" class="anchor-navigation-ex-anchor" href="#2&#x3001;&#x5185;&#x5B58;"><i class="fa fa-link" aria-hidden="true"></i></a>2. 2&#x3001;&#x5185;&#x5B58;</h1>
<h2 id="&#x5185;&#x5B58;&#x5927;&#x5C0F;"><a name="&#x5185;&#x5B58;&#x5927;&#x5C0F;" class="anchor-navigation-ex-anchor" href="#&#x5185;&#x5B58;&#x5927;&#x5C0F;"><i class="fa fa-link" aria-hidden="true"></i></a>2.1. &#x5185;&#x5B58;&#x5927;&#x5C0F;</h2>
<pre class="language-"><code class="lang-sh">MEM<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /proc/meminfo <span class="token operator">|</span><span class="token function">grep</span> MemTotal<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos;{print <span class="token variable">$2</span>/1024/1024}&apos;</span><span class="token variable">`</span></span>
<span class="token keyword">echo</span> <span class="token string">&quot;mem&quot;</span> <span class="token variable">$MEM</span>
</code></pre>
<h2 id="&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;"><a name="&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;" class="anchor-navigation-ex-anchor" href="#&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;"><i class="fa fa-link" aria-hidden="true"></i></a>2.2. &#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;</h2>
<p>&#x4EE5;M&#x5B57;&#x8282;&#x663E;&#x793A;&#x5185;&#x5B58;&#x60C5;&#x51B5;</p>
<pre class="language-"><code class="lang-sh"><span class="token function">free</span> -m
</code></pre>
<p>&#x8BA1;&#x7B97;&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;,availableMemSize&#x6BD4;&#x7269;&#x7406;&#x5185;&#x5B58;&#x5C0F;&#xFF0C;&#x53BB;&#x6389;&#x4E86;&#x5185;&#x6838;&#x5360;&#x7528;&#x7684;&#x5185;&#x5B58;</p>
<pre class="language-"><code class="lang-sh">availableMemSize<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">free</span> -m <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos;<span class="token variable">$1</span>~/Mem/{print <span class="token variable">$2</span>}&apos;</span><span class="token variable">`</span></span><span class="token punctuation">;</span>
phyFreeMemSize<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">free</span> -m <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos;<span class="token variable">$2</span>~/buffers/{print <span class="token variable">$3</span>}&apos;</span><span class="token variable">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$phyFreeMemSize</span>/<span class="token variable">$availableMemSize*100</span><span class="token operator">|</span><span class="token function">bc</span> -l
</code></pre>
<h2 id="&#x5FAA;&#x73AF;&#x663E;&#x793A;&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;"><a name="&#x5FAA;&#x73AF;&#x663E;&#x793A;&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;" class="anchor-navigation-ex-anchor" href="#&#x5FAA;&#x73AF;&#x663E;&#x793A;&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;"><i class="fa fa-link" aria-hidden="true"></i></a>2.3. &#x5FAA;&#x73AF;&#x663E;&#x793A;&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;</h2>
<pre class="language-"><code class="lang-sh"><span class="token keyword">while</span> <span class="token punctuation">[</span> 1 <span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">do</span> availableMemSize<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">free</span> -m <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos;<span class="token variable">$1</span>~/Mem/{print <span class="token variable">$2</span>}&apos;</span><span class="token variable">`</span></span><span class="token punctuation">;</span> phyFreeMemSize<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">free</span> -m <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos;<span class="token variable">$2</span>~/buffers/{print <span class="token variable">$3</span>}&apos;</span><span class="token variable">`</span></span><span class="token punctuation">;</span> <span class="token keyword">echo</span> <span class="token variable">$phyFreeMemSize</span>/<span class="token variable">$availableMemSize*100</span><span class="token operator">|</span><span class="token function">bc</span> -l<span class="token punctuation">;</span> <span class="token function">sleep</span> 1<span class="token punctuation">;</span> <span class="token keyword">done</span>
</code></pre>
<h2 id="&#x6240;&#x6709;&#x8FDB;&#x7A0B;&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x65E2;rss"><a name="&#x6240;&#x6709;&#x8FDB;&#x7A0B;&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x65E2;rss" class="anchor-navigation-ex-anchor" href="#&#x6240;&#x6709;&#x8FDB;&#x7A0B;&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x65E2;rss"><i class="fa fa-link" aria-hidden="true"></i></a>2.4. &#x6240;&#x6709;&#x8FDB;&#x7A0B;&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x65E2;RSS</h2>
<pre class="language-"><code class="lang-sh"><span class="token function">ps</span> aux<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos;{sum+=<span class="token variable">$6</span>} END {print sum/1024}&apos;</span>
</code></pre>
<h2 id="&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;&#x4E0D;&#x9AD8;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x7528;&#x4E8E;buffer&#x548C;cache"><a name="&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;&#x4E0D;&#x9AD8;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x7528;&#x4E8E;buffer&#x548C;cache" class="anchor-navigation-ex-anchor" href="#&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;&#x4E0D;&#x9AD8;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x7528;&#x4E8E;buffer&#x548C;cache"><i class="fa fa-link" aria-hidden="true"></i></a>2.5. &#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;&#x4E0D;&#x9AD8;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x7528;&#x4E8E;buffer&#x548C;cache</h2>
<p>Linux &#x5185;&#x5B58;&#x4E2D;&#x7684; Cache &#x771F;&#x7684;&#x80FD;&#x88AB;&#x56DE;&#x6536;&#x4E48;&#xFF1F;
<a href="https://www.v2ex.com/t/278921" target="_blank">https://www.v2ex.com/t/278921</a>
&#x6E05;&#x7A7A;buff/cache</p>
<pre class="language-"><code class="lang-sh"><span class="token function">sudo</span> <span class="token keyword">echo</span> 3 <span class="token operator">&gt;</span> /proc/sys/vm/drop_caches
</code></pre>
<h2 id="used&#x5185;&#x5B58;&#x5230;&#x5E95;&#x54EA;&#x91CC;&#x53BB;&#x4E86;"><a name="used&#x5185;&#x5B58;&#x5230;&#x5E95;&#x54EA;&#x91CC;&#x53BB;&#x4E86;" class="anchor-navigation-ex-anchor" href="#used&#x5185;&#x5B58;&#x5230;&#x5E95;&#x54EA;&#x91CC;&#x53BB;&#x4E86;"><i class="fa fa-link" aria-hidden="true"></i></a>2.6. Used&#x5185;&#x5B58;&#x5230;&#x5E95;&#x54EA;&#x91CC;&#x53BB;&#x4E86;</h2>
<p>Linux Used&#x5185;&#x5B58;&#x5230;&#x5E95;&#x54EA;&#x91CC;&#x53BB;&#x4E86;&#xFF1F;(<a href="http://blog.yufeng.info/archives/2456" target="_blank">http://blog.yufeng.info/archives/2456</a>)</p>
<pre class="language-"><code class="lang-sh"><span class="token comment">#/bin/bash</span>
<span class="token keyword">for</span> PROC <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">ls</span> /proc/<span class="token operator">|</span><span class="token function">grep</span> <span class="token string">&quot;^[0-9]&quot;</span><span class="token variable">`</span></span>
<span class="token keyword">do</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -f /proc/<span class="token variable">$PROC</span>/statm <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      TEP<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /proc/$PROC/statm <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&apos;{print (<span class="token variable">$2</span>)}&apos;</span><span class="token variable">`</span></span>
      RSS<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $RSS + $TEP<span class="token variable">`</span></span>
  <span class="token keyword">fi</span>
<span class="token keyword">done</span>
RSS<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $RSS \* 4<span class="token variable">`</span></span>
PageTable<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">grep</span> PageTables /proc/meminfo <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&apos;{print <span class="token variable">$2</span>}&apos;</span><span class="token variable">`</span></span>
SlabInfo<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /proc/slabinfo <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos;BEGIN{sum=0;}{sum=sum+<span class="token variable">$3*</span><span class="token variable">$4</span>;}END{print sum/1024/1024}&apos;</span><span class="token variable">`</span></span>

<span class="token keyword">echo</span> <span class="token variable">$RSS</span><span class="token string">&quot;KB&quot;</span>, <span class="token variable">$PageTable</span><span class="token string">&quot;KB&quot;</span>, <span class="token variable">$SlabInfo</span><span class="token string">&quot;MB&quot;</span>
<span class="token function">printf</span> <span class="token string">&quot;rss+pagetable+slabinfo=%sMB\n&quot;</span> <span class="token variable"><span class="token variable">`</span><span class="token keyword">echo</span> $RSS/1024 + $PageTable/1024 + $SlabInfo<span class="token operator">|</span><span class="token function">bc</span><span class="token variable">`</span></span>
<span class="token function">free</span> -m
</code></pre>
<h2 id="&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x5206;&#x5E03;"><a name="&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x5206;&#x5E03;" class="anchor-navigation-ex-anchor" href="#&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x5206;&#x5E03;"><i class="fa fa-link" aria-hidden="true"></i></a>2.7. &#x5185;&#x5B58;&#x4F7F;&#x7528;&#x5206;&#x5E03;</h2>
<p><a href="http://blog.csdn.net/Thronds/article/details/18767265" target="_blank">http://blog.csdn.net/Thronds/article/details/18767265</a></p>
<p>&#x603B;&#x4F7F;&#x7528;&#x5185;&#x5B58;=Slab+PageTables+&#x5185;&#x5B58;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;+SHM+&#x7528;&#x6237;&#x8FDB;&#x7A0B;&#x7684;&#x6570;&#x636E;&#x6BB5;+&#x7528;&#x6237;&#x8FDB;&#x7A0B;&#x7684;&#x6587;&#x672C;&#x6BB5;</p>
<h3 id="slab"><a name="slab" class="anchor-navigation-ex-anchor" href="#slab"><i class="fa fa-link" aria-hidden="true"></i></a>2.7.1. Slab</h3>
<pre class="language-"><code class="lang-sh"><span class="token function">grep</span> Slab /proc/meminfo
</code></pre>
<h3 id="pagetables"><a name="pagetables" class="anchor-navigation-ex-anchor" href="#pagetables"><i class="fa fa-link" aria-hidden="true"></i></a>2.7.2. PageTables</h3>
<pre class="language-"><code class="lang-sh"><span class="token function">grep</span> PageTables /proc/meminfo
</code></pre>
<h3 id="&#x5185;&#x5B58;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5360;&#x7528;&#x5185;&#x5B58;"><a name="&#x5185;&#x5B58;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5360;&#x7528;&#x5185;&#x5B58;" class="anchor-navigation-ex-anchor" href="#&#x5185;&#x5B58;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5360;&#x7528;&#x5185;&#x5B58;"><i class="fa fa-link" aria-hidden="true"></i></a>2.7.3. &#x5185;&#x5B58;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5360;&#x7528;&#x5185;&#x5B58;</h3>
<h4 id="shm"><a name="shm" class="anchor-navigation-ex-anchor" href="#shm"><i class="fa fa-link" aria-hidden="true"></i></a>SHM</h4>
<pre class="language-"><code class="lang-sh"><span class="token comment">#&#x5355;&#x4F4D;K</span>
<span class="token function">sudo</span> <span class="token function">du</span> -s /dev/shm
</code></pre>
<h4 id="&#x7528;&#x6237;&#x8FDB;&#x7A0B;&#x7684;&#x6570;&#x636E;&#x6BB5;"><a name="&#x7528;&#x6237;&#x8FDB;&#x7A0B;&#x7684;&#x6570;&#x636E;&#x6BB5;" class="anchor-navigation-ex-anchor" href="#&#x7528;&#x6237;&#x8FDB;&#x7A0B;&#x7684;&#x6570;&#x636E;&#x6BB5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7528;&#x6237;&#x8FDB;&#x7A0B;&#x7684;&#x6570;&#x636E;&#x6BB5;</h4>
<pre class="language-"><code class="lang-sh"><span class="token comment">#&#x5355;&#x4F4D;K</span>
<span class="token function">grep</span> Rss /proc/<span class="token punctuation">[</span>1-9<span class="token punctuation">]</span>*/smaps <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&apos;{total+=<span class="token variable">$2</span>}; END {print total}&apos;</span>
</code></pre>
<h4 id="&#x7528;&#x6237;&#x8FDB;&#x7A0B;&#x7684;&#x6587;&#x672C;&#x6BB5;"><a name="&#x7528;&#x6237;&#x8FDB;&#x7A0B;&#x7684;&#x6587;&#x672C;&#x6BB5;" class="anchor-navigation-ex-anchor" href="#&#x7528;&#x6237;&#x8FDB;&#x7A0B;&#x7684;&#x6587;&#x672C;&#x6BB5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7528;&#x6237;&#x8FDB;&#x7A0B;&#x7684;&#x6587;&#x672C;&#x6BB5;</h4>
<pre class="language-"><code class="lang-sh"><span class="token comment">#&#x5355;&#x4F4D;K</span>
<span class="token function">grep</span> Pss /proc/<span class="token punctuation">[</span>1-9<span class="token punctuation">]</span>*/smaps <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&apos;{total+=<span class="token variable">$2</span>}; END {print total}&apos;</span>
</code></pre>
<h1 id="swap"><a name="swap" class="anchor-navigation-ex-anchor" href="#swap"><i class="fa fa-link" aria-hidden="true"></i></a>3. SWAP</h1>
<h2 id="&#x6700;&#x5927;&#x9650;&#x5EA6;&#x4F7F;&#x7528;&#x5185;&#x5B58;"><a name="&#x6700;&#x5927;&#x9650;&#x5EA6;&#x4F7F;&#x7528;&#x5185;&#x5B58;" class="anchor-navigation-ex-anchor" href="#&#x6700;&#x5927;&#x9650;&#x5EA6;&#x4F7F;&#x7528;&#x5185;&#x5B58;"><i class="fa fa-link" aria-hidden="true"></i></a>3.1. &#x6700;&#x5927;&#x9650;&#x5EA6;&#x4F7F;&#x7528;&#x5185;&#x5B58;</h2>
<pre class="language-"><code class="lang-sh"><span class="token function">sudo</span> vim /etc/sysctl.conf
vm.swappiness <span class="token operator">=</span> 0
<span class="token function">sudo</span> sysctl -p
<span class="token keyword">echo</span> 0 <span class="token operator">&gt;</span> /proc/sys/vm/swappiness
</code></pre>
<blockquote>
<p>PS:&#x8BBE;&#x7F6E;vm.swappiness=0 &#x540E;&#x5E76;&#x4E0D;&#x4EE3;&#x8868;&#x7981;&#x7528;swap&#x5206;&#x533A;&#xFF0C;&#x53EA;&#x662F;&#x544A;&#x8BC9;&#x5185;&#x6838;&#xFF0C;&#x80FD;&#x5C11;&#x7528;&#x5230;swap&#x5206;&#x533A;&#x5C31;&#x5C3D;&#x91CF;&#x5C11;&#x7528;&#x5230;&#xFF0C;&#x8BBE;&#x7F6E;vm.swappiness=100&#x7684;&#x8BDD;&#xFF0C;&#x5219;&#x8868;&#x793A;&#x5C3D;&#x91CF;&#x4F7F;&#x7528;swap&#x5206;&#x533A;&#xFF0C;&#x9ED8;&#x8BA4;&#x7684;&#x503C;&#x662F;60
&#x8C03;&#x6574;&#x5185;&#x5B58;&#x53C2;&#x6570;&#xFF0C;&#x5F53;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x7387;&#x4E0D;&#x8DB3;10%&#xFF08;&#x5F00;&#x59CB;&#x662F;&#x9ED8;&#x8BA4;&#x503C;60&#xFF09;&#x65F6;&#x5728;&#x4F7F;&#x7528;swap&#xFF0C;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x4F7F;&#x7528;swap&#xFF0C;&#x51CF;&#x5C11;&#x5524;&#x9192;&#x8F6F;&#x4E2D;&#x65AD;&#x8FDB;&#x7A0B;&#xFF0C;&#x4ECE;&#x800C;&#x964D;&#x4F4E;ksoftirqd&#x8FDB;&#x7A0B;&#x5BF9;cpu&#x7684;&#x5360;&#x7528;</p>
</blockquote>
<h2 id="&#x6E05;&#x7406;swap"><a name="&#x6E05;&#x7406;swap" class="anchor-navigation-ex-anchor" href="#&#x6E05;&#x7406;swap"><i class="fa fa-link" aria-hidden="true"></i></a>3.2. &#x6E05;&#x7406;SWAP</h2>
<pre class="language-"><code class="lang-sh"><span class="token function">sudo</span> swapoff -a <span class="token operator">&amp;&amp;</span> swapon -a
</code></pre>
<h2 id="&#x67E5;&#x770B;&#x54EA;&#x4E9B;&#x8FDB;&#x7A0B;&#x5360;&#x7528;swap"><a name="&#x67E5;&#x770B;&#x54EA;&#x4E9B;&#x8FDB;&#x7A0B;&#x5360;&#x7528;swap" class="anchor-navigation-ex-anchor" href="#&#x67E5;&#x770B;&#x54EA;&#x4E9B;&#x8FDB;&#x7A0B;&#x5360;&#x7528;swap"><i class="fa fa-link" aria-hidden="true"></i></a>3.3. &#x67E5;&#x770B;&#x54EA;&#x4E9B;&#x8FDB;&#x7A0B;&#x5360;&#x7528;SWAP</h2>
<pre class="language-"><code class="lang-sh"><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cd</span> /proc<span class="token punctuation">;</span><span class="token function">ls</span> <span class="token operator">|</span><span class="token function">grep</span> <span class="token string">&quot;^[0-9]&quot;</span><span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos; <span class="token variable">$0</span> &gt;100&apos;</span><span class="token variable">`</span></span> <span class="token punctuation">;</span><span class="token keyword">do</span> <span class="token function">awk</span> <span class="token string">&apos;/Swap:/{a=a+<span class="token variable">$2</span>}END{print &apos;</span><span class="token string">&quot;<span class="token variable">$i</span>&quot;</span><span class="token string">&apos;,a/1024&quot;M&quot;}&apos;</span> /proc/<span class="token variable">$i</span>/smaps <span class="token punctuation">;</span><span class="token keyword">done</span> <span class="token operator">|</span><span class="token function">sort</span> -k2nr<span class="token operator">|</span> <span class="token function">head</span> -20
</code></pre>
<h1 id="3&#x3001;&#x78C1;&#x76D8;"><a name="3&#x3001;&#x78C1;&#x76D8;" class="anchor-navigation-ex-anchor" href="#3&#x3001;&#x78C1;&#x76D8;"><i class="fa fa-link" aria-hidden="true"></i></a>4. 3&#x3001;&#x78C1;&#x76D8;</h1>
<h2 id="&#x78C1;&#x76D8;&#x5229;&#x7528;&#x7387;"><a name="&#x78C1;&#x76D8;&#x5229;&#x7528;&#x7387;" class="anchor-navigation-ex-anchor" href="#&#x78C1;&#x76D8;&#x5229;&#x7528;&#x7387;"><i class="fa fa-link" aria-hidden="true"></i></a>4.1. &#x78C1;&#x76D8;&#x5229;&#x7528;&#x7387;</h2>
<p>iostate -x</p>
<h2 id="iops"><a name="iops" class="anchor-navigation-ex-anchor" href="#iops"><i class="fa fa-link" aria-hidden="true"></i></a>4.2. IOPS</h2>
<pre class="language-"><code class="lang-sh"><span class="token shebang important">#!/bin/bash</span>
uplrio<span class="token operator">=</span>0
uplwio<span class="token operator">=</span>0
updrio<span class="token operator">=</span>0
updwio<span class="token operator">=</span>0

<span class="token keyword">while</span> <span class="token boolean">true</span> <span class="token punctuation">;</span> <span class="token keyword">do</span>
    lrio<span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> -w sda /proc/diskstats <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&apos;{print <span class="token variable">$4</span>}&apos;</span><span class="token variable">)</span></span>
    lwio<span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> -w sda /proc/diskstats <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&apos;{print <span class="token variable">$8</span>}&apos;</span><span class="token variable">)</span></span>
    llrio<span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token keyword">echo</span> <span class="token punctuation">(</span>$lrio - $uplrio <span class="token variable">)</span></span><span class="token operator">|</span> bc<span class="token punctuation">)</span>
    llwio<span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token keyword">echo</span> $lwio - $uplwio <span class="token operator">|</span> <span class="token function">bc</span><span class="token variable">)</span></span>
    iops<span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token keyword">echo</span> <span class="token string">&quot;<span class="token variable">$llrio</span> + <span class="token variable">$llwio</span> &quot;</span> <span class="token operator">|</span> <span class="token function">bc</span><span class="token variable">)</span></span>
    <span class="token keyword">echo</span> <span class="token string">&quot;iops:<span class="token variable">$iops</span> Data_Read <span class="token variable">$llrio</span> Data_Write <span class="token variable">$llwio</span> &quot;</span>
    uplrio<span class="token operator">=</span><span class="token variable">$lrio</span>
    uplwio<span class="token operator">=</span><span class="token variable">$lwio</span>
    <span class="token function">sleep</span> 1
<span class="token keyword">done</span>
</code></pre>
<h2 id="&#x78C1;&#x76D8;&#x5199;&#x901F;&#x7387;"><a name="&#x78C1;&#x76D8;&#x5199;&#x901F;&#x7387;" class="anchor-navigation-ex-anchor" href="#&#x78C1;&#x76D8;&#x5199;&#x901F;&#x7387;"><i class="fa fa-link" aria-hidden="true"></i></a>4.3. &#x78C1;&#x76D8;&#x5199;&#x901F;&#x7387;</h2>
<pre class="language-"><code class="lang-sh">
<span class="token comment"># &#x7528;1G&#x6587;&#x4EF6;&#x505A;&#x6D4B;&#x8BD5;</span>

<span class="token function">sync</span><span class="token punctuation">;</span><span class="token function">dd</span> if<span class="token operator">=</span>/dev/zero of<span class="token operator">=</span>test.dd bs<span class="token operator">=</span>1M count<span class="token operator">=</span>1000 conv<span class="token operator">=</span>fdatasync<span class="token punctuation">;</span><span class="token function">rm</span> -f test.dd

<span class="token function">sync</span><span class="token punctuation">;</span>/usr/bin/time -p <span class="token function">bash</span> -c <span class="token string">&quot;(dd if=/dev/zero of=test.dd  bs=1000K count=1000;sync)&quot;</span><span class="token punctuation">;</span><span class="token function">rm</span> -f test.dd
</code></pre>
<h1 id="4&#x3001;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;"><a name="4&#x3001;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;" class="anchor-navigation-ex-anchor" href="#4&#x3001;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;"><i class="fa fa-link" aria-hidden="true"></i></a>5. 4&#x3001;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</h1>
<h2 id="&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5206;&#x533A;"><a name="&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5206;&#x533A;" class="anchor-navigation-ex-anchor" href="#&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5206;&#x533A;"><i class="fa fa-link" aria-hidden="true"></i></a>5.1. &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5206;&#x533A;</h2>
<pre class="language-"><code>Filesystem            Size  Used Avail Use% Mounted on
tmpfs                  68G   39G   30G  58% /dev/shm
/dev/sda2            1008M   60M  898M   7% /boot
/dev/sda1             512M  272K  512M   1% /boot/efi
/dev/mapper/vg_system-lv_root        69G  460M   65G   1% /
/dev/mapper/vg_system-lv_usr    230G  6.2G  212G   3% /usr
/dev/mapper/vg_system-lv_var    207G  2.2G  195G   2% /var
/dev/mapper/vg_system-lv_tmp   138G  188M  131G   1% /tmp
/dev/mapper/vg_system-lv_home      69G  1.4G   65G   3% /home
/dev/mapper/vg_app-lv_app    99G   28G   67G  30% /inm/app
/dev/mapper/vg_app-lv_data    1.7T  1.4T  248G  85% /inm/data
</code></pre><h2 id="cron&#x6839;&#x636E;vip&#x6302;&#x8F7D;&#x5378;&#x8F7D;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;"><a name="cron&#x6839;&#x636E;vip&#x6302;&#x8F7D;&#x5378;&#x8F7D;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;" class="anchor-navigation-ex-anchor" href="#cron&#x6839;&#x636E;vip&#x6302;&#x8F7D;&#x5378;&#x8F7D;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;"><i class="fa fa-link" aria-hidden="true"></i></a>5.2. cron&#x6839;&#x636E;VIP&#x6302;&#x8F7D;/&#x5378;&#x8F7D;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</h2>
<pre class="language-"><code>
if /sbin/ip addr show dev eth0 | grep &apos;172\.16\.72\.13&apos; &gt;/dev/null 2&gt;&amp;1 ; then

  if /bin/mount|grep &apos;/inm/data&apos; &gt;/dev/null 2&gt;&amp;1 ; then

    sleep 1

  else

    /bin/mount -o noatime /dev/VG_inm/LV_inmdata /inm/data

  fi

else

  if /bin/mount|grep &apos;/inm/data&apos; &gt;/dev/null 2&gt;&amp;1 ; then

    /sbin/fuser -mk /inm/data &amp;&amp; /bin/umount /inm/data

  fi

fi
</code></pre><h2 id="inode&#x544A;&#x8B66;"><a name="inode&#x544A;&#x8B66;" class="anchor-navigation-ex-anchor" href="#inode&#x544A;&#x8B66;"><i class="fa fa-link" aria-hidden="true"></i></a>5.3. inode&#x544A;&#x8B66;</h2>
<pre class="language-"><code class="lang-sh">
<span class="token function">df</span> -i

<span class="token function">find</span> */ <span class="token operator">!</span> -type l <span class="token operator">|</span> <span class="token function">cut</span> -d / -f 1 <span class="token operator">|</span> <span class="token function">uniq</span> -c

<span class="token function">ls</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">rm</span> -rf
</code></pre>
<h2 id="&#x6587;&#x4EF6;&#x5220;&#x9664;&#x7A7A;&#x95F4;&#x6CA1;&#x6709;&#x91CA;&#x653E;"><a name="&#x6587;&#x4EF6;&#x5220;&#x9664;&#x7A7A;&#x95F4;&#x6CA1;&#x6709;&#x91CA;&#x653E;" class="anchor-navigation-ex-anchor" href="#&#x6587;&#x4EF6;&#x5220;&#x9664;&#x7A7A;&#x95F4;&#x6CA1;&#x6709;&#x91CA;&#x653E;"><i class="fa fa-link" aria-hidden="true"></i></a>5.4. &#x6587;&#x4EF6;&#x5220;&#x9664;&#x7A7A;&#x95F4;&#x6CA1;&#x6709;&#x91CA;&#x653E;</h2>
<p>&#x627E;&#x5230;&#x88AB;&#x8FDB;&#x7A0B;&#x5360;&#x7528;&#x4F46;&#x662F;&#x5220;&#x9664;&#x72B6;&#x6001;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x505C;&#x6B62;&#x5E94;&#x7528;&#x8BA9;&#x5176;&#x91CA;&#x653E;&#x6587;&#x4EF6;</p>
<pre class="language-"><code class="lang-sh">
<span class="token function">lsof</span> <span class="token operator">|</span><span class="token function">grep</span> deleted
</code></pre>
<h1 id="5&#x3001;&#x7F51;&#x7EDC;"><a name="5&#x3001;&#x7F51;&#x7EDC;" class="anchor-navigation-ex-anchor" href="#5&#x3001;&#x7F51;&#x7EDC;"><i class="fa fa-link" aria-hidden="true"></i></a>6. 5&#x3001;&#x7F51;&#x7EDC;</h1>
<h2 id="&#x7AEF;&#x53E3;&#x8FDE;&#x63A5;"><a name="&#x7AEF;&#x53E3;&#x8FDE;&#x63A5;" class="anchor-navigation-ex-anchor" href="#&#x7AEF;&#x53E3;&#x8FDE;&#x63A5;"><i class="fa fa-link" aria-hidden="true"></i></a>6.1. &#x7AEF;&#x53E3;&#x8FDE;&#x63A5;</h2>
<pre class="language-"><code class="lang-sh">
<span class="token comment"># &#x6253;&#x5370;&#x8BBF;&#x95EE;&#x672C;&#x5730;2181&#x7AEF;&#x53E3;&#x7684;&#x8FDE;&#x63A5;</span>

<span class="token function">sudo</span> <span class="token function">netstat</span> -antp<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos;<span class="token variable">$4</span>~/64.5:2181/{print}&apos;</span>

<span class="token comment"># &#x6253;&#x5370;&#x8BBF;&#x95EE;&#x76EE;&#x6807;64.5:2181&#x7684;&#x8FDB;&#x7A0B;</span>

<span class="token function">sudo</span> pwdx <span class="token variable"><span class="token variable">`</span><span class="token function">sudo</span> <span class="token function">netstat</span> -antp<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos;<span class="token variable">$5</span>~/64.5:2181/{print}&apos;</span> <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">&apos;[/ ]+&apos;</span> <span class="token string">&apos;/^tcp/{print <span class="token variable"><span class="token variable">$(</span>NF-2<span class="token variable">)</span></span>}&apos;</span><span class="token variable">`</span></span>
</code></pre>
<h2 id="&#x8FDE;&#x63A5;&#x6570;"><a name="&#x8FDE;&#x63A5;&#x6570;" class="anchor-navigation-ex-anchor" href="#&#x8FDE;&#x63A5;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>6.2. &#x8FDE;&#x63A5;&#x6570;</h2>
<pre class="language-"><code>
netstat -n | awk &apos;/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}&apos;
</code></pre><p>CLOSED&#xFF1A;&#x65E0;&#x8FDE;&#x63A5;&#x662F;&#x6D3B;&#x52A8;&#x7684;&#x6216;&#x6B63;&#x5728;&#x8FDB;&#x884C;</p>
<p>LISTEN&#xFF1A;&#x670D;&#x52A1;&#x5668;&#x5728;&#x7B49;&#x5F85;&#x8FDB;&#x5165;&#x547C;&#x53EB;</p>
<p>SYN_RECV&#xFF1A;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x5DF2;&#x7ECF;&#x5230;&#x8FBE;&#xFF0C;&#x7B49;&#x5F85;&#x786E;&#x8BA4;</p>
<p>SYN_SENT&#xFF1A;&#x5E94;&#x7528;&#x5DF2;&#x7ECF;&#x5F00;&#x59CB;&#xFF0C;&#x6253;&#x5F00;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;</p>
<p>ESTABLISHED&#xFF1A;&#x6B63;&#x5E38;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x72B6;&#x6001;</p>
<p>FIN_WAIT1&#xFF1A;&#x5E94;&#x7528;&#x8BF4;&#x5B83;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;</p>
<p>FIN_WAIT2&#xFF1A;&#x53E6;&#x4E00;&#x8FB9;&#x5DF2;&#x540C;&#x610F;&#x91CA;&#x653E;</p>
<p>ITMED_WAIT&#xFF1A;&#x7B49;&#x5F85;&#x6240;&#x6709;&#x5206;&#x7EC4;&#x6B7B;&#x6389;</p>
<p>CLOSING&#xFF1A;&#x4E24;&#x8FB9;&#x540C;&#x65F6;&#x5C1D;&#x8BD5;&#x5173;&#x95ED;</p>
<p>TIME_WAIT&#xFF1A;&#x53E6;&#x4E00;&#x8FB9;&#x5DF2;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;&#x91CA;&#x653E;</p>
<p>LAST_ACK&#xFF1A;&#x7B49;&#x5F85;&#x6240;&#x6709;&#x5206;&#x7EC4;&#x6B7B;&#x6389;</p>
<p>&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x8FD9;&#x6761;&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x628A;&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x7684;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#x72B6;&#x6001;&#x5206;&#x7C7B;&#x6C47;&#x603B;&#x3002;</p>
<p>&#x5982;&#x53D1;&#x73B0;&#x7CFB;&#x7EDF;&#x5B58;&#x5728;&#x5927;&#x91CF;TIME_WAIT&#x72B6;&#x6001;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x901A;&#x8FC7;&#x8C03;&#x6574;&#x5185;&#x6838;&#x53C2;&#x6570;&#x89E3;&#x51B3;&#xFF0C;</p>
<p>vim /etc/sysctl.conf</p>
<p>&#x7F16;&#x8F91;&#x6587;&#x4EF6;&#xFF0C;&#x52A0;&#x5165;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#xFF1A;</p>
<p>net.ipv4.tcp_syncookies = 1</p>
<p>net.ipv4.tcp_tw_reuse = 1</p>
<p>net.ipv4.tcp_tw_recycle = 1</p>
<p>net.ipv4.tcp_fin_timeout = 30</p>
<p>&#x7136;&#x540E;&#x6267;&#x884C; /sbin/sysctl -p &#x8BA9;&#x53C2;&#x6570;&#x751F;&#x6548;&#x3002;</p>
<p>net.ipv4.tcp_syncookies = 1 &#x8868;&#x793A;&#x5F00;&#x542F;SYN Cookies&#x3002;&#x5F53;&#x51FA;&#x73B0;SYN&#x7B49;&#x5F85;&#x961F;&#x5217;&#x6EA2;&#x51FA;&#x65F6;&#xFF0C;&#x542F;&#x7528;cookies&#x6765;&#x5904;&#x7406;&#xFF0C;&#x53EF;&#x9632;&#x8303;&#x5C11;&#x91CF;SYN&#x653B;&#x51FB;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0&#xFF0C;&#x8868;&#x793A;&#x5173;&#x95ED;&#xFF1B;</p>
<p>net.ipv4.tcp_tw_reuse = 1 &#x8868;&#x793A;&#x5F00;&#x542F;&#x91CD;&#x7528;&#x3002;&#x5141;&#x8BB8;&#x5C06;TIME-WAIT sockets&#x91CD;&#x65B0;&#x7528;&#x4E8E;&#x65B0;&#x7684;TCP&#x8FDE;&#x63A5;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0&#xFF0C;&#x8868;&#x793A;&#x5173;&#x95ED;&#xFF1B;</p>
<p>net.ipv4.tcp_tw_recycle = 1 &#x8868;&#x793A;&#x5F00;&#x542F;TCP&#x8FDE;&#x63A5;&#x4E2D;TIME-WAIT sockets&#x7684;&#x5FEB;&#x901F;&#x56DE;&#x6536;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0&#xFF0C;&#x8868;&#x793A;&#x5173;&#x95ED;&#x3002;</p>
<p><a href="http://www.tuicool.com/articles/3eYRb2A" target="_blank">http://www.tuicool.com/articles/3eYRb2A</a>,</p>
<p>&#x4E0D;&#x8981;&#x5728;linux&#x4E0A;&#x542F;&#x7528;net.ipv4.tcp_tw_recycle&#x53C2;&#x6570;</p>
<p>net.ipv4.tcp_fin_timeout &#x4FEE;&#x6539;&#x7CFB;?&#x9ED8;&#x8BA4;&#x7684; TIMEOUT &#x65F6;&#x95F4;</p>
<h2 id="&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x8FDE;&#x63A5;&#x6392;&#x540D;"><a name="&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x8FDE;&#x63A5;&#x6392;&#x540D;" class="anchor-navigation-ex-anchor" href="#&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x8FDE;&#x63A5;&#x6392;&#x540D;"><i class="fa fa-link" aria-hidden="true"></i></a>6.3. &#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x8FDE;&#x63A5;&#x6392;&#x540D;</h2>
<pre class="language-"><code class="lang-sh">
ss -antp<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos;<span class="token variable">$1</span>==&quot;ESTAB&quot;&amp;&amp;<span class="token variable">$4</span>~/1523/{print <span class="token variable">$5</span>}&apos;</span><span class="token operator">|</span><span class="token function">awk</span> -F<span class="token string">&apos;:&apos;</span> <span class="token string">&apos;{print <span class="token variable">$1</span>}&apos;</span><span class="token operator">|</span><span class="token function">sort</span><span class="token operator">|</span><span class="token function">uniq</span> -c<span class="token operator">|</span><span class="token function">sort</span> -k1n
</code></pre>
<h2 id="&#x7F51;&#x7EDC;&#x79EF;&#x538B;"><a name="&#x7F51;&#x7EDC;&#x79EF;&#x538B;" class="anchor-navigation-ex-anchor" href="#&#x7F51;&#x7EDC;&#x79EF;&#x538B;"><i class="fa fa-link" aria-hidden="true"></i></a>6.4. &#x7F51;&#x7EDC;&#x79EF;&#x538B;</h2>
<pre class="language-"><code class="lang-sh">
<span class="token function">sudo</span> <span class="token function">netstat</span> -ntp

&#x6216;

<span class="token function">sudo</span> ss -antp       ss -ant
</code></pre>
<p>&#x8F93;&#x51FA;&#x4E2D;&#x6709;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;Recv-Q(&#x63A5;&#x53D7;&#x961F;&#x5217;) Send-Q(&#x53D1;&#x9001;&#x961F;&#x5217;) &#x4E2D;&#x7684;&#x6570;&#x636E;&#x91CF;&#xFF0C;
&#x53EF;&#x4EE5;&#x5224;&#x65AD;&#x6570;&#x636E;&#x5904;&#x7406;&#x6709;&#x6CA1;&#x6709;&#x79EF;&#x538B;</p>
<h5 id="&#x5E26;&#x5BBD;&#x6D4B;&#x8BD5;iperf3"><a name="&#x5E26;&#x5BBD;&#x6D4B;&#x8BD5;iperf3" class="anchor-navigation-ex-anchor" href="#&#x5E26;&#x5BBD;&#x6D4B;&#x8BD5;iperf3"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5E26;&#x5BBD;&#x6D4B;&#x8BD5;iperf3</h5>
<pre class="language-"><code class="lang-sh"><span class="token comment"># &#x670D;&#x52A1;&#x7AEF;</span>
iperf3 -s -p 9009
<span class="token comment"># &#x5BA2;&#x6237;&#x7AEF;</span>
iperf3 -c 10.10.10.3 -p 9009 -t 20

iperf3 -c172.16.73.5 -p9009 -t 20 -w 512k -f M
</code></pre>
<p>-c &#x8868;&#x793A;&#x670D;&#x52A1;&#x7AEF;&#x5730;&#x5740;
-t &#x8868;&#x793A;&#x6D4B;&#x8BD5;&#x6301;&#x7EED;&#x65F6;&#x95F4;&#xFF0C;&#x8FD9;&#x91CC;&#x662F;10&#x79D2;
-w &#x8868;&#x793A;&#x62A5;&#x6587;&#x5927;&#x5C0F;
-f &#x8868;&#x793A;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#x7684;&#x5EA6;&#x91CF;&#x5355;&#x4F4D;&#xFF0C;&#x8FD9;&#x91CC;&#x662F;&#x5146;</p>
<h2 id="sar&#x547D;&#x4EE4;&#x5206;&#x6790;&#x7F51;&#x5361;&#x6D41;&#x91CF;"><a name="sar&#x547D;&#x4EE4;&#x5206;&#x6790;&#x7F51;&#x5361;&#x6D41;&#x91CF;" class="anchor-navigation-ex-anchor" href="#sar&#x547D;&#x4EE4;&#x5206;&#x6790;&#x7F51;&#x5361;&#x6D41;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>6.5. sar&#x547D;&#x4EE4;&#x5206;&#x6790;&#x7F51;&#x5361;&#x6D41;&#x91CF;</h2>
<p>sar -n { DEV | EDEV | NFS | NFSD | SOCK | ALL }
sar &#x63D0;&#x4F9B;&#x516D;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x8BED;&#x6CD5;&#x9009;&#x9879;&#x6765;&#x663E;&#x793A;&#x7F51;&#x7EDC;&#x4FE1;&#x606F;&#x3002;
-n&#x9009;&#x9879;&#x4F7F;&#x7528;6&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x5F00;&#x5173;&#xFF1A;DEV | EDEV | NFS | NFSD | SOCK | ALL &#x3002;
DEV&#x663E;&#x793A;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x4FE1;&#x606F;&#xFF0C;
EDEV&#x663E;&#x793A;&#x5173;&#x4E8E;&#x7F51;&#x7EDC;&#x9519;&#x8BEF;&#x7684;&#x7EDF;&#x8BA1;&#x6570;&#x636E;&#xFF0C;
NFS&#x7EDF;&#x8BA1;&#x6D3B;&#x52A8;&#x7684;NFS&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x4FE1;&#x606F;&#xFF0C;
NFSD&#x7EDF;&#x8BA1;NFS&#x670D;&#x52A1;&#x5668;&#x7684;&#x4FE1;&#x606F;&#xFF0C;
SOCK&#x663E;&#x793A;&#x5957; &#x63A5;&#x5B57;&#x4FE1;&#x606F;&#xFF0C;
ALL&#x663E;&#x793A;&#x6240;&#x6709;5&#x4E2A;&#x5F00;&#x5173;&#x3002;
&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x5355;&#x72EC;&#x6216;&#x8005;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x3002;</p>
<pre class="language-"><code class="lang-sh">sar -n DEV 2
</code></pre>
<p>IFACE&#xFF1A;LAN&#x63A5;&#x53E3;
rxpck/s&#xFF1A;&#x6BCF;&#x79D2;&#x949F;&#x63A5;&#x6536;&#x7684;&#x6570;&#x636E;&#x5305;
txpck/s&#xFF1A;&#x6BCF;&#x79D2;&#x949F;&#x53D1;&#x9001;&#x7684;&#x6570;&#x636E;&#x5305;
rxbyt/s&#xFF1A;&#x6BCF;&#x79D2;&#x949F;&#x63A5;&#x6536;&#x7684;&#x5B57;&#x8282;&#x6570;
txbyt/s&#xFF1A;&#x6BCF;&#x79D2;&#x949F;&#x53D1;&#x9001;&#x7684;&#x5B57;&#x8282;&#x6570;
rxcmp/s&#xFF1A;&#x6BCF;&#x79D2;&#x949F;&#x63A5;&#x6536;&#x7684;&#x538B;&#x7F29;&#x6570;&#x636E;&#x5305;
txcmp/s&#xFF1A;&#x6BCF;&#x79D2;&#x949F;&#x53D1;&#x9001;&#x7684;&#x538B;&#x7F29;&#x6570;&#x636E;&#x5305;
rxmcst/s&#xFF1A;&#x6BCF;&#x79D2;&#x949F;&#x63A5;&#x6536;&#x7684;&#x591A;&#x64AD;&#x6570;&#x636E;&#x5305;</p>
<pre class="language-"><code class="lang-sh">sar -n EDEV 2
</code></pre>
<p>IFACE&#xFF1A;LAN&#x63A5;&#x53E3;
rxerr/s&#xFF1A;&#x6BCF;&#x79D2;&#x949F;&#x63A5;&#x6536;&#x7684;&#x574F;&#x6570;&#x636E;&#x5305;
txerr/s&#xFF1A;&#x6BCF;&#x79D2;&#x949F;&#x53D1;&#x9001;&#x7684;&#x574F;&#x6570;&#x636E;&#x5305;
coll/s&#xFF1A;&#x6BCF;&#x79D2;&#x51B2;&#x7A81;&#x6570;
rxdrop/s&#xFF1A;&#x56E0;&#x4E3A;&#x7F13;&#x51B2;&#x5145;&#x6EE1;&#xFF0C;&#x6BCF;&#x79D2;&#x949F;&#x4E22;&#x5F03;&#x7684;&#x5DF2;&#x63A5;&#x6536;&#x6570;&#x636E;&#x5305;&#x6570;
txdrop/s&#xFF1A;&#x56E0;&#x4E3A;&#x7F13;&#x51B2;&#x5145;&#x6EE1;&#xFF0C;&#x6BCF;&#x79D2;&#x949F;&#x4E22;&#x5F03;&#x7684;&#x5DF2;&#x53D1;&#x9001;&#x6570;&#x636E;&#x5305;&#x6570;
txcarr/s&#xFF1A;&#x53D1;&#x9001;&#x6570;&#x636E;&#x5305;&#x65F6;&#xFF0C;&#x6BCF;&#x79D2;&#x8F7D;&#x6CE2;&#x9519;&#x8BEF;&#x6570;
rxfram/s&#xFF1A;&#x6BCF;&#x79D2;&#x63A5;&#x6536;&#x6570;&#x636E;&#x5305;&#x7684;&#x5E27;&#x5BF9;&#x9F50;&#x9519;&#x8BEF;&#x6570;
rxfifo/s&#xFF1A;&#x63A5;&#x6536;&#x7684;&#x6570;&#x636E;&#x5305;&#x6BCF;&#x79D2;FIFO&#x8FC7;&#x901F;&#x7684;&#x9519;&#x8BEF;&#x6570;
txfifo/s&#xFF1A;&#x53D1;&#x9001;&#x7684;&#x6570;&#x636E;&#x5305;&#x6BCF;&#x79D2;FIFO&#x8FC7;&#x901F;&#x7684;&#x9519;&#x8BEF;&#x6570;</p>
<pre class="language-"><code class="lang-sh">sar -n SOCK 2
</code></pre>
<p>totsck:&#x4F7F;&#x7528;&#x7684;&#x5957;&#x63A5;&#x5B57;&#x603B;&#x6570;&#x91CF;
tcpsck:&#x4F7F;&#x7528;&#x7684;TCP&#x5957;&#x63A5;&#x5B57;&#x6570;&#x91CF;
udpsck:&#x4F7F;&#x7528;&#x7684;UDP&#x5957;&#x63A5;&#x5B57;&#x6570;&#x91CF;
rawsck:&#x4F7F;&#x7528;&#x7684;raw&#x5957;&#x63A5;&#x5B57;&#x6570;&#x91CF;
ip-frag:&#x4F7F;&#x7528;&#x7684;IP&#x6BB5;&#x6570;&#x91CF;</p>
<h1 id="6&#x3001;&#x8FDB;&#x7A0B;"><a name="6&#x3001;&#x8FDB;&#x7A0B;" class="anchor-navigation-ex-anchor" href="#6&#x3001;&#x8FDB;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>7. 6&#x3001;&#x8FDB;&#x7A0B;</h1>
<h2 id="&#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x6570;"><a name="&#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x6570;" class="anchor-navigation-ex-anchor" href="#&#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>7.1. &#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x6570;</h2>
<p>&#x67E5;&#x770B;&#x67D0;&#x4E2A;&#x8FDB;&#x7A0B;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x6570;</p>
<pre class="language-"><code class="lang-sh"><span class="token function">lsof</span> -p pid <span class="token operator">|</span><span class="token function">wc</span> -l
<span class="token function">ulimit</span> -a
</code></pre>
<p>&#x67E5;&#x770B;&#x5404;&#x4E2A;&#x8FDB;&#x7A0B;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x6570;</p>
<pre class="language-"><code class="lang-sh"><span class="token function">lsof</span> -n <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos;{print <span class="token variable">$2</span>}&apos;</span><span class="token operator">|</span><span class="token function">sort</span><span class="token operator">|</span><span class="token function">uniq</span> -c <span class="token operator">|</span><span class="token function">sort</span> -nr<span class="token operator">|</span><span class="token function">head</span> -20
</code></pre>
<h2 id="&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x6253;&#x5F00;&#x6570;"><a name="&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x6253;&#x5F00;&#x6570;" class="anchor-navigation-ex-anchor" href="#&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x6253;&#x5F00;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>7.2. &#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x6253;&#x5F00;&#x6570;</h2>
<p>&#x9488;&#x5BF9;&#x7528;&#x6237;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x6570;&#x7684;&#x9650;&#x5236;</p>
<pre class="language-"><code class="lang-sh">vim /etc/security/limits.conf
@mtgroup        soft    nofile           4096
@mtgroup        hard    nofile           4096
</code></pre>
<p>&#x7CFB;&#x7EDF;&#x6587;&#x4EF6;&#x603B;&#x6570;&#x9650;&#x5236;</p>
<pre class="language-"><code class="lang-sh"><span class="token function">cat</span> /proc/sys/fs/file-nr
<span class="token function">cat</span> /proc/sys/fs/file-max
vim /etc/sysctl.conf
fs.file-max<span class="token operator">=</span>65536
</code></pre>
<p>&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x662F;file-max&#x6700;&#x5927;&#x80FD;&#x8BBE;&#x7F6E;&#x591A;&#x5927;&#x5462;&#xFF1F;&#x5F53;&#x7136;&#x4F60;&#x53EF;&#x4EE5;&#x628A;&#x5B83;&#x5F80;&#x5927;&#x4E86;&#x8BBE;&#xFF0C;&#x4F46;&#x662F;&#x540C;&#x65F6;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x8D8A;&#x591A;&#xFF0C;&#x5185;&#x5B58;&#x5F00;&#x9500;&#x5C31;&#x8D8A;&#x5927;&#x3002;&#x90A3;&#x600E;&#x6837;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x5408;&#x7406;&#x7684;&#x4E0A;&#x9650;&#x5462;&#xFF1F;&#x4E00;&#x4E2A;&#x7ECF;&#x9A8C;&#x7B97;&#x6CD5;&#x662F; 256&#x4E2A;fd &#x9700;4M&#x5185;&#x5B58;&#x3002;&#x4F8B;&#x5982;8G&#x5185;&#x5B58;&#xFF0C;8<em>1024/4</em>256=524288&#x3002;</p>
<pre class="language-"><code>1. &#x8BA1;&#x7B97; fdmax = &#x7269;&#x7406;&#x5185;&#x5B58;&#x5927;&#x5C0F;(m&#x4E3A;&#x5355;&#x4F4D;) / 4 * 256  &#x5047;&#x8BBE;&#x5185;&#x5B58;&#x4E3A;8G,fdmax=524288
2. &#x6267;&#x884C;&#x547D;&#x4EE4;: echo fs.file-max=524288 &gt;&gt; /etc/sysctl.conf
3. &#x6267;&#x884C;&#x547D;&#x4EE4;: sysctl -p
4. &#x6267;&#x884C;&#x547D;&#x4EE4;: echo  * soft nofile  524286 &gt;&gt; /etc/security/limits.conf
5. &#x6267;&#x884C;&#x547D;&#x4EE4;: echo  * hard nofile 524287 &gt;&gt; /etc/security/limits.conf
5. &#x7ED3;&#x675F;&#x5F53;&#x524D;&#x4F1A;&#x8BDD;&#x671F;
6. &#x542F;&#x52A8;&#x65B0;&#x7684;&#x4F1A;&#x8BDD;
7. &#x542F;&#x52A8;&#x6211;&#x4EEC;&#x7684;&#x670D;&#x52A1;
</code></pre><h2 id="max-user-processes"><a name="max-user-processes" class="anchor-navigation-ex-anchor" href="#max-user-processes"><i class="fa fa-link" aria-hidden="true"></i></a>7.3. max user processes</h2>
<p>&#x7CFB;&#x7EDF;&#x5185;&#x6838;&#x914D;&#x7F6E;</p>
<pre class="language-"><code class="lang-sh"><span class="token function">sudo</span> sysctl -n kernel.pid_max<span class="token operator">=</span>65535
<span class="token keyword">echo</span> <span class="token string">&apos;kernel.pid_max = 65535&apos;</span> <span class="token operator">&gt;&gt;</span> /etc/sysctl.conf
sysctl -p
</code></pre>
<p>&#x666E;&#x901A;&#x7528;&#x6237;&#x914D;&#x7F6E;&#xFF0C;&#x5982;&#x679C;&#x5185;&#x6838;&#x914D;&#x7F6E;&#x6CA1;&#x6709;&#x4FEE;&#x6539;&#xFF0C;&#x5373;&#x65F6;&#x666E;&#x901A;&#x7528;&#x6237;&#x914D;&#x7F6E;&#x5F88;&#x5927;&#x4E5F;&#x65E0;&#x6CD5;&#x8D85;&#x8FC7;&#x5185;&#x6838;&#x914D;&#x7F6E;</p>
<pre class="language-"><code class="lang-sh">vim /etc/security/limits.d/20-nproc.conf
*          soft    nproc     65535
</code></pre>
<blockquote>
<p>&#x8C8C;&#x4F3C;&#x914D;&#x7F6E;&#x4E86;&#x7528;&#x6237;&#x914D;&#x7F6E;&#xFF0C;&#x91CD;&#x542F;&#x540E;&#x5185;&#x6838;&#x914D;&#x7F6E;&#x4E5F;&#x88AB;&#x4FEE;&#x6539;&#x4E86;</p>
</blockquote>
<h2 id="&#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x505C;&#x6B62;&#x65F6;&#x95F4;"><a name="&#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x505C;&#x6B62;&#x65F6;&#x95F4;" class="anchor-navigation-ex-anchor" href="#&#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x505C;&#x6B62;&#x65F6;&#x95F4;"><i class="fa fa-link" aria-hidden="true"></i></a>7.4. &#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x505C;&#x6B62;&#x65F6;&#x95F4;</h2>
<pre class="language-"><code class="lang-sh"><span class="token function">ps</span> axo pid,ppid,comm,pmem,lstart,etime <span class="token operator">|</span> <span class="token function">grep</span> Wap
<span class="token comment">#lstart&#x542F;&#x52A8;&#x65F6;&#x95F4;</span>
<span class="token comment">#etime&#x8FD0;&#x884C;&#x65F6;&#x957F;</span>
</code></pre>
<h2 id="&#x4F7F;&#x7528;cpu&#x6700;&#x9AD8;&#x7684;&#x8FDB;&#x7A0B;top10"><a name="&#x4F7F;&#x7528;cpu&#x6700;&#x9AD8;&#x7684;&#x8FDB;&#x7A0B;top10" class="anchor-navigation-ex-anchor" href="#&#x4F7F;&#x7528;cpu&#x6700;&#x9AD8;&#x7684;&#x8FDB;&#x7A0B;top10"><i class="fa fa-link" aria-hidden="true"></i></a>7.5. &#x4F7F;&#x7528;CPU&#x6700;&#x9AD8;&#x7684;&#x8FDB;&#x7A0B;TOP10</h2>
<pre class="language-"><code class="lang-sh"><span class="token function">ps</span> aux<span class="token operator">|</span><span class="token function">head</span> -1<span class="token punctuation">;</span><span class="token function">ps</span> aux<span class="token operator">|</span><span class="token function">grep</span> -v PID<span class="token operator">|</span><span class="token function">sort</span> -rn -k +3<span class="token operator">|</span><span class="token function">head</span>
</code></pre>
<h2 id="&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x6700;&#x9AD8;&#x7684;&#x8FDB;&#x7A0B;top10"><a name="&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x6700;&#x9AD8;&#x7684;&#x8FDB;&#x7A0B;top10" class="anchor-navigation-ex-anchor" href="#&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x6700;&#x9AD8;&#x7684;&#x8FDB;&#x7A0B;top10"><i class="fa fa-link" aria-hidden="true"></i></a>7.6. &#x4F7F;&#x7528;&#x5185;&#x5B58;&#x6700;&#x9AD8;&#x7684;&#x8FDB;&#x7A0B;TOP10</h2>
<pre class="language-"><code class="lang-sh"><span class="token function">ps</span> aux<span class="token operator">|</span><span class="token function">head</span> -1<span class="token punctuation">;</span><span class="token function">ps</span> aux<span class="token operator">|</span><span class="token function">grep</span> -v PID<span class="token operator">|</span><span class="token function">sort</span> -rn -k +4<span class="token operator">|</span><span class="token function">head</span>
</code></pre>
<h2 id="&#x6240;&#x6709;&#x8FDB;&#x7A0B;&#x5185;&#x5B58;"><a name="&#x6240;&#x6709;&#x8FDB;&#x7A0B;&#x5185;&#x5B58;" class="anchor-navigation-ex-anchor" href="#&#x6240;&#x6709;&#x8FDB;&#x7A0B;&#x5185;&#x5B58;"><i class="fa fa-link" aria-hidden="true"></i></a>7.7. &#x6240;&#x6709;&#x8FDB;&#x7A0B;&#x5185;&#x5B58;</h2>
<pre class="language-"><code class="lang-sh"><span class="token function">grep</span> Pss /proc/<span class="token punctuation">[</span>1-9<span class="token punctuation">]</span>*/smaps <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&apos;{total+=<span class="token variable">$2</span>}; END {print total}&apos;</span>
<span class="token comment">#&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5168;&#x90E8;&#x8FDB;&#x7A0B;&#x5360;&#x7528;&#x7684;&#x5185;&#x5B58;&#x5E76;&#x4E0D;&#x7B49;&#x4E8E; free &#x547D;&#x4EE4;&#x6240;&#x663E;&#x793A;&#x7684; &#x201C;used memory&#x201D;&#xFF0C;&#x56E0;&#x4E3A;&#x201C;used memory&#x201D;&#x4E0D;&#x4EC5;&#x5305;&#x542B;&#x4E86;&#x8FDB;&#x7A0B;&#x6240;&#x5360;&#x7528;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x8FD8;&#x5305;&#x542B;cache/buffer&#x4EE5;&#x53CA;kernel&#x52A8;&#x6001;&#x5206;&#x914D;&#x7684;&#x5185;&#x5B58;&#x7B49;&#x7B49;&#x3002;</span>
<span class="token comment">#ps aux|awk &apos;{sum+=$6} END {print sum/1024}&apos; #&#x8FD9;&#x4E2A;&#x4E0D;&#x5BF9;&#xFF0C;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x4F1A;&#x88AB;&#x91CD;&#x590D;&#x8BA1;&#x7B97;</span>
</code></pre>
<h2 id="&#x6279;&#x91CF;&#x6740;&#x67D0;ip&#x8FDE;&#x63A5;&#x8FDB;&#x7A0B;"><a name="&#x6279;&#x91CF;&#x6740;&#x67D0;ip&#x8FDE;&#x63A5;&#x8FDB;&#x7A0B;" class="anchor-navigation-ex-anchor" href="#&#x6279;&#x91CF;&#x6740;&#x67D0;ip&#x8FDE;&#x63A5;&#x8FDB;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>7.8. &#x6279;&#x91CF;&#x6740;&#x67D0;ip&#x8FDE;&#x63A5;&#x8FDB;&#x7A0B;</h2>
<pre class="language-"><code class="lang-sh"><span class="token function">netstat</span> -antp<span class="token operator">|</span><span class="token function">grep</span> 135.149.48.192<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&apos;{print <span class="token variable">$7</span>}&apos;</span><span class="token operator">|</span><span class="token function">awk</span> -F<span class="token string">&apos;/&apos;</span> <span class="token string">&apos;{print <span class="token variable">$1</span>}&apos;</span> <span class="token operator">|</span><span class="token function">xargs</span> <span class="token function">kill</span>
</code></pre>
<footer class="page-footer"><span class="copyright">Copyright &#xA9; one 2014-2018 all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x6700;&#x540E;&#x4FEE;&#x8BA2;&#x65F6;&#x95F4;&#xFF1A;
2018-08-29 09:39:05
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class="search-results-count"></span> results matching &quot;<span class="search-query"></span>&quot;</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching &quot;<span class="search-query"></span>&quot;</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="linux_hardware_cmd.html" class="navigation navigation-prev " aria-label="Previous page: Linux&#x786C;&#x4EF6;&#x5E38;&#x7528;&#x547D;&#x4EE4;">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="linux_other_cmd.html" class="navigation navigation-next " aria-label="Next page: Linux&#x5176;&#x5B83;&#x5E38;&#x7528;&#x547D;&#x4EE4;">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Linux性能常用命令","level":"1.7.5","depth":2,"next":{"title":"Linux其它常用命令","level":"1.7.6","depth":2,"path":"linux_other_cmd.md","ref":"linux_other_cmd.md","articles":[]},"previous":{"title":"Linux硬件常用命令","level":"1.7.4","depth":2,"path":"linux_hardware_cmd.md","ref":"linux_hardware_cmd.md","articles":[]},"dir":"ltr"},"config":{"plugins":["tbfed-pagefooter","expandable-chapters","-sharing","sharing-plus","splitter","header","anchor-navigation-ex-toc","prism","-highlight","include-codeblock","livereload"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright &copy one 2014-2018","modify_label":"最后修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"prism":{"css":["prismjs/themes/prism-tomorrow.css"]},"livereload":{},"splitter":{},"search":{},"layout":{"headerPath":"layouts/header.html"},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"header":{},"anchor-navigation-ex-toc":{"associatedWithSummary":true,"float":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showLevel":true},"fontsettings":{"theme":"white","family":"sans","size":2},"anchor-navigation-ex":{"multipleH1":true,"showLevel":true,"float":{"showLevelIcon":false,"level1Icon":"fa fa-hand-o-right","level2Icon":"fa fa-hand-o-right","level3Icon":"fa fa-hand-o-right"}},"include-codeblock":{"check":false,"edit":false,"fixlang":false,"lang":"","template":"default","theme":"monokai","unindent":true},"sharing":{"qq":true,"all":[],"douban":false,"facebook":false,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":false,"messenger":false,"line":false,"vk":false,"pocket":false,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"theme":"default","author":"S1","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"学习中心","language":"zh-hans","links":{"sidebar":{"码云":"https://gitee.com/3017677"},"sharing":{"google":false,"facebook":false,"twitter":false,"all":false}},"gitbook":"*","description":"学习中心"},"file":{"path":"linux_performance_cmd.md","mtime":"2018-08-29T01:39:05.497Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-10-19T03:12:45.224Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

